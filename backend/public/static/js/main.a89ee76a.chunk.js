(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{167:function(e,t){},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(17),c=n.n(a),i=n(11),o=n(15),l=n(13),u=n(21),d=n(4),p=n(7),h=n(8),j=n(10),m=n(9),f=n(5),b=n.n(f),g=n(6),O={query:x,get:function(e,t){return x(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=y(),x(e).then((function(n){return n.push(t),v(e,n),t}))},put:function(e,t){return x(e).then((function(n){var r=n.findIndex((function(e){return e._id===t._id}));return n.splice(r,1,t),v(e,n),t}))},remove:function(e,t){return x(e).then((function(n){var r=n.findIndex((function(e){return e._id===t}));n.splice(r,1),v(e,n)}))},save:v,postComment:function(e,t){var n=t.txt,r=t.petId,s=t.loggedInUser;return x(e).then((function(t){console.log("\ud83d\ude80 ~ file: asyncStorageService.js ~ line 38 ~ query ~ entities",t);var a=t.find((function(e){return e._id===r})),c={id:r,txt:n,created:Date.now(),by:{_id:s._id,fullname:s.fullname,imgUrl:s.imgUrl}};a.comments.push(c);var i=t.findIndex((function(e){return e._id===r}));return t.splice(i,1,a),v(e,t),c}))}};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.type,r=t.age,s=t.location,a=t.gender,c=t.size,i=JSON.parse(localStorage.getItem(e))||[];return n&&(i=i.filter((function(e){return e.type.includes(n)}))),r&&(i=i.filter((function(e){return e.age.includes(r)}))),s&&(i=i.filter((function(e){return e.owner.loc.address.toUpperCase().includes(s.toUpperCase())}))),a&&(i=i.filter((function(e){return e.gender===a}))),c&&(i=i.filter((function(e){return e.size.toUpperCase().includes(c.toUpperCase())}))),Promise.resolve(i)}function v(e,t){localStorage.setItem(e,JSON.stringify(t))}function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var w=n(94),S="/api/",k=n.n(w).a.create({withCredentials:!0}),N=function(e,t){return C(e,"GET",t)},E=function(e,t){return C(e,"POST",t)},_=function(e,t){return C(e,"PUT",t)},I=function(e,t){return C(e,"DELETE",t)};function C(e){return U.apply(this,arguments)}function U(){return(U=Object(g.a)(b.a.mark((function e(t){var n,r,s,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",r=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,k({url:"".concat(S).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var M={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},timeSince:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Math.floor((new Date-e)/1e3);return Math.round(n/31557600)>=2?Math.round(n/31557600)+" years "+t:Math.round(n/31557600)>=1?"1 year "+t:Math.round(n/2626560)>=2?Math.round(n/2626560)+" months "+t:Math.round(n/2626560)>=1?"1 month "+t:Math.round(n/604800)>=2?Math.round(n/604800)+" weeks "+t:Math.round(n/604800)>=1?"1 week "+t:Math.round(n/86400)>=2?Math.round(n/86400)+" days "+t:Math.round(n/86400)>=1?"1 day "+t:Math.round(n/3600)>=2?Math.round(n/3600)+" hours "+t:Math.round(n/3600)>=1?"1 hour "+t:Math.round(n/60)>=2?Math.round(n/60)+" minutes "+t:Math.round(n/60)>=1?"1 minute "+t:n>=2?n+" seconds "+t:n+"1 second "+t}};window.storageService=O;var P={query:function(){return A.apply(this,arguments)},getPetByid:function(e){return B.apply(this,arguments)},add:function(e){return T.apply(this,arguments)},update:R,remove:function(e){O.remove(L,e)},toggleLike:function(e,t){return z.apply(this,arguments)},addComment:function(e,t){return D.apply(this,arguments)}},L="pets";function A(){return(A=Object(g.a)(b.a.mark((function e(){var t,n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=t?"?gender=".concat(t.gender,"&age=").concat(t.age,"&type=").concat(t.type,"&location=").concat(t.location,"&size=").concat(t.size,"&sortBy=").concat(t.sort):"",e.prev=2,e.abrupt("return",N("pet".concat(n)));case 6:throw e.prev=6,e.t0=e.catch(2),e.t0;case 9:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function T(){return(T=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._id,e.next=3,O.post(L,t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return q.apply(this,arguments)}function q(){return(q=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("pet/".concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(g.a)(b.a.mark((function e(t,n){var r,s,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),r=Object(d.a)({},n),a=(s=t).loggedInUser,c=s.txt,t={id:"c"+M.makeId(6),txt:c,created:Date.now(),_id:M.makeId(),by:{id:a._id,fullname:a.fullname,imgUrl:a.imgUrl}},r.comments.push(t),e.next=7,R(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("pet/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(g.a)(b.a.mark((function e(t,n){var r,s,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.userId,s=n.act,a=n.idx,c=Object(d.a)({},t),e.t0=s,e.next=1===e.t0?5:-1===e.t0?7:9;break;case 5:return c.likedBy.push(r),e.abrupt("break",10);case 7:return c.likedBy.splice(a,1),e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:return c.likes=+c.likes,c.likes+=s,e.next=14,R(c);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(95),W=n.n(F),H=function(){var e=null,t={setup:function(){return Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,N("setup-session");case 4:e=W()("",{reconnection:!1}),!0;case 6:case"end":return t.stop()}}),t)})))()},on:function(n,r){return Object(g.a)(b.a.mark((function s(){return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=3;break}return s.next=3,t.setup();case 3:e.on(n,r);case 4:case"end":return s.stop()}}),s)})))()},off:function(n){var r=arguments;return Object(g.a)(b.a.mark((function s(){var a;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:null,e){s.next=4;break}return s.next=4,t.setup();case 4:a?e.off(n,a):e.removeAllListeners(n);case 5:case"end":return s.stop()}}),s)})))()},emit:function(n,r){return Object(g.a)(b.a.mark((function s(){return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("im in socketservice front emit"),e){s.next=4;break}return s.next=4,t.setup();case 4:e.emit(n,r);case 5:case"end":return s.stop()}}),s)})))()},terminate:function(){e=null,!1}};return t}();window.socketService=H;function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.query(e);case 3:r=t.sent,n({type:"SET_PETS",pets:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("unable to query pets",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function Q(e){return function(t){return P.add(e).then((function(e){t({type:"ADD_PET",pet:e})}))}}function G(e,t){return function(n){return P.toggleLike(e,t).then((function(e){n({type:"UPDATE_PET",pet:e})}))}}H.setup();var Y=n(26),J={login:function(e){return Z.apply(this,arguments)},logout:function(){return ee.apply(this,arguments)},signup:function(e){return $.apply(this,arguments)},getUsers:function(){return N("user")},getById:V,remove:function(e){return I("user/".concat(e))},update:function(e){return K.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem("loggedinUser"))},saveNewRequest:function(e){return re.apply(this,arguments)},saveNewApprove:function(e){return se.apply(this,arguments)},updateLoggedInUser:function(e){return te.apply(this,arguments)}};function V(e){return N("user/".concat(e))}function K(){return(K=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("user/".concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("auth/login",t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",ne(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("user",t);case 2:return n=e.sent,e.abrupt("return",ne(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=e.sent,e.abrupt("return",ne(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function re(){return(re=Object(g.a)(b.a.mark((function e(t){var n,r,s,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newRequest,r=t.owner,s=t.petId,a=r.pets.findIndex((function(e){return e._id===s})),!r.pets[a].adoptQue){e.next=13;break}if(r.pets[a].adoptQue.some((function(e){return e.userId===n.userId}))){e.next=10;break}return r.pets[a].adoptQue.push(n),H.emit("adopt-request",t),e.abrupt("return",r);case 10:return c={msg:"You already requested the owner, please wait for him to response",userId:n.userId},H.emit("already-requested-msg",c),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(g.a)(b.a.mark((function e(t){var n,r,s,a,c,i,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pet,r=t.req,s=t.loggedInUser,a=t.idx,e.next=3,V(r.userId);case 3:c=e.sent,console.log("newOwner",c),i={_id:n._id,isAdopted:!0,formerOwnerId:s._id,adoptQue:[]},o={_id:n._id,isAdopted:!0,newOwner:r._id,formerOwnerId:s._id,adoptQue:[]},c=Object(d.a)(Object(d.a)({},c),{},{pets:[].concat(Object(Y.a)(c.pets),[c.pets.push(i)])}),l=Object(d.a)(Object(d.a)({},s),{},{oldPets:s.oldPets?s.oldPets.some((function(e){return e._id===n._id}))?Object(Y.a)(s.oldPets):[].concat(Object(Y.a)(s.oldPets),[s.oldPets.push(o)]):[o],pets:[s.pets.splice(a,1)].concat(Object(Y.a)(s.pets))}),console.log(c,l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return function(){var e=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,J.getUsers();case 4:n=e.sent,t({type:"SET_USERS",users:n}),H.on("user-updated",(function(e){console.log(e),t({type:"ADD_REQUEST",newAdoptReq:e})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 12:return e.prev=12,t({type:"LOADING_DONE"}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.remove(e);case 3:n({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function ie(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.login(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function oe(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.signup(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function le(e){return console.log("logout"),H.off("user-join",e),function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}function ue(){return function(e){e({type:"ON_EXPLORE"})}}function de(){return function(e){e({type:"SHOW_SEARCH"})}}function pe(){return function(e){e({type:"NOT_SHOW_SEARCH"})}}var he=n(0),je=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={readMore:!1},e.getTxt=function(){var t=e.props.txt;return e.state.readMore?t:t.slice(0,200)},e.toggleRead=function(t){t.preventDefault(),e.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{readMore:!e.readMore})}))},e.addReadmoreMsg=function(){if(e.props.txt.length>100)return e.state.readMore?" Less":" Expand..."},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(he.jsx)("span",{onClick:this.toggleRead,children:Object(he.jsxs)("p",{className:"read-more",children:[this.getTxt(),Object(he.jsx)("span",{className:"expand-txt",children:this.addReadmoreMsg()})]})})}}]),n}(r.Component),me=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isCommenting:!1,commentToEdit:{txt:"",petId:e.props.pet._id,loggedInUser:null}},e.onSubmit=function(t,n,r){e.toggleAddComment(),e.props.addComment(t,n,r),e.setState((function(e){return{commentToEdit:Object(d.a)(Object(d.a)({},e.commentToEdit),{},{txt:""})}}))},e.toggleAddComment=function(){if(!e.state.isCommenting&&!e.props.loggedInUser)return alert("Please login first in order to comment on this pet");e.setState({isCommenting:!e.state.isCommenting})},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState((function(t){var n;return{commentToEdit:Object(d.a)(Object(d.a)({},t.commentToEdit),{},(n={},Object(u.a)(n,r,s),Object(u.a)(n,"loggedInUser",e.props.loggedInUser),n))}}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.pet;return Object(he.jsxs)("section",{className:"comments-container",children:[Object(he.jsx)("div",{className:"comments-btns flex",children:Object(he.jsx)("button",{className:"add-comment-btn",onClick:function(){return e.toggleAddComment()},children:"Add comment"})}),Object(he.jsx)("h3",{className:"comments-head",children:"Comments"}),Object(he.jsxs)("div",{className:"comments-body",children:[Object(he.jsx)("ul",{className:"comments-list clean-list",children:t.comments.map((function(e,t){return Object(he.jsx)("div",{children:Object(he.jsxs)("li",{className:"comment-preview-card flex column",children:[Object(he.jsxs)("div",{className:"comment-header flex",children:[Object(he.jsx)("img",{src:e.by.imgUrl,alt:"skeleton"}),Object(he.jsxs)("div",{className:"flex column",children:[Object(he.jsx)("span",{className:"commenter-name",children:e.by.fullname}),Object(he.jsx)("span",{className:"comment-time",children:M.timeSince(e.created,"ago")})]})]}),Object(he.jsx)(je,{className:"comment-desc",txt:e.txt})]})},e.id?e.id:t+(new Date).getTime())}))}),Object(he.jsx)("div",{className:this.state.isCommenting?"new-comment-modal":"new-comment-modal hide",onClick:function(){e.toggleAddComment()},children:Object(he.jsxs)("form",{className:"modal-form",onSubmit:function(t){return e.onSubmit(t,e.state.commentToEdit,e.props.pet)},onClick:function(e){e.stopPropagation()},children:[Object(he.jsx)("h2",{children:"Add a comment"}),Object(he.jsx)("textarea",{name:"txt",onChange:this.handleChange,value:this.state.commentToEdit.txt,placeholder:"comment your heart!",autoComplete:"off"}),Object(he.jsxs)("div",{className:"modal-btns flex",children:[Object(he.jsx)("button",{className:"close-modal",children:"close"}),Object(he.jsx)("button",{className:"post-comment",children:"post"})]})]})})]})]})}}]),n}(r.Component),fe={addComment:function(e,t,n){return e.preventDefault(),function(e){return P.addComment(t,n).then((function(t){e({type:"UPDATE_PET",pet:t})}))}}},be=Object(i.b)((function(e){return{users:e.userModule.users,pets:e.petModule.pets,loggedInUser:e.userModule.loggedInUser}}),fe)(me),ge=n(96),Oe=n.n(ge),xe=n(28),ve=n.n(xe),ye=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isLiked:!1},e.checkUserLike=function(){var t=e.props,n=t.loggedInUser,r=t.pet;if(n){var s=!!r.likedBy.find((function(e){return e===n._id}));e.setState({isLiked:s})}},e.onLike=function(){var t=e.props,n=t.loggedInUser,r=t.pet;if(!n)return xe.store.addNotification({title:"Alert",message:"You are in guest mode, Please logging to like the pet",type:"info",insert:"top",container:"top-right",animationIn:["animate__animated","animate__zoomIn"],animationOut:["animate__animated","animate__zoomOut"],dismiss:{duration:2e3,onScreen:!1}}),console.log("You are in guest mode, please logging to like the pet");var s=!!r.likedBy.find((function(e){return e===n._id}));e.setState({isLiked:!s});var a=r.likedBy.findIndex((function(e){return e===n._id})),c={petId:r._id,userId:n._id,act:s?-1:1,idx:a};e.props.toggleLike(r,c)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.checkUserLike()}},{key:"render",value:function(){var e=this,t=this.state.isLiked;return Object(he.jsx)("span",{className:"pet-like-btn",onClick:function(){return e.onLike()},children:Object(he.jsx)(Oe.a,{className:t?"heart heartfill":"heart heart-empty"})})}}]),n}(r.Component),we={toggleLike:G},Se=Object(i.b)((function(e){return{users:e.userModule.users,pets:e.petModule.pets,loggedInUser:e.userModule.loggedInUser}}),we)(ye),ke=n(112),Ne=n(98),Ee=n.n(Ne),_e=function(e){e.text;return Object(he.jsx)("div",{children:Object(he.jsx)("div",{className:"map-pin",children:Object(he.jsx)(Ee.a,{})})})},Ie=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(he.jsx)("div",{style:{height:"50vh",width:"100%",margin:"20px 0"},children:Object(he.jsx)(ke.a,{bootstrapURLKeys:{key:"AIzaSyCY2IxLhaoBnaCRaEN5hoe6pTAuimLuxUg"},defaultCenter:this.props.loc?this.props.loc:this.props.center,defaultZoom:this.props.zoom,children:Object(he.jsx)(_e,{lat:this.props.loc.lat,lng:this.props.loc.lng,text:this.props.loc.address})})})}}]),n}(r.Component);Ie.defaultProps={center:{lat:59.95,lng:30.33},zoom:15};var Ce,Ue,Me,Pe,Le,Ae,Te,Re,qe,De,Be,ze,Fe,We,He,Xe,Qe=Object(i.b)((function(e){return{users:e.userModule.users,pets:e.petModule.pets,loggedInUser:e.userModule.loggedInUser}}),{})(Ie),Ge=n(37),Ye=(n(190),n(38)),Je=n(100),Ve=n.n(Je),Ke=n(99),Ze=n.n(Ke),$e=n(102),et=n.n($e),tt=n(101),nt=n.n(tt);function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function at(e,t){var n=e.title,s=e.titleId,a=st(e,["title","titleId"]);return r.createElement("svg",rt({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 487.601 487.601",style:{enableBackground:"new 0 0 487.601 487.601"},xmlSpace:"preserve",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,Ce||(Ce=r.createElement("g",null,r.createElement("g",{id:"XMLID_1736_"},r.createElement("path",{id:"XMLID_1737_",d:"M379,229.65c-25.6,0-46.3,20.8-46.3,46.3c0,6.1,5,11.1,11.1,11.1s11.1-5,11.1-11.1 c0-13.3,10.9-24.2,24.2-24.2c6.1,0,11.1-5,11.1-11.1C390.1,234.55,385.1,229.65,379,229.65z"}),r.createElement("path",{id:"XMLID_1738_",d:"M454.5,197.75c-2.7-2.6-5.6-5.1-8.6-7.5l0,0l-41-34.8c-15.8-11.2-34.6-18.3-55-19.7l2.2,2.2l-24.9-25 H327c-6.9-6.3-16.2-10.2-26.3-10.2c-17.4,0-32.1,11.3-37.1,27c-5-3.2-10.8-5.1-17.1-5.5c-1-0.1-2.1-0.1-3.1-0.1 c-7.1,0-13.7,2.1-19.3,5.6c-5.1-15.6-19.8-26.9-37.1-26.9c-10.1,0-19.3,3.8-26.3,10.2h-0.2l-24.9,25l2.2-2.2 c-20.4,1.4-39.3,8.6-55,19.7l-41,34.8l0,0c-3,2.3-5.9,4.8-8.6,7.5C12.7,217.65,0,245.35,0,276.05c0,60,48.8,108.8,108.8,108.8 c55.4,0,101.3-41.7,107.9-95.4c8,4.6,17.3,7.2,27.1,7.2c9.9,0,19.1-2.6,27.1-7.2c6.7,53.6,52.5,95.3,107.9,95.3 c60,0,108.8-48.8,108.8-108.8C487.7,245.25,475,217.55,454.5,197.75z M108.8,350.25c-41,0-74.2-33.2-74.2-74.2 s33.2-74.2,74.2-74.2s74.2,33.2,74.2,74.2C183.1,316.95,149.8,350.25,108.8,350.25z M243.9,265.85c-13.3,0-24.1-10.8-24.1-24.1 c0-13.3,10.8-24.1,24.1-24.1c13.3,0,24.1,10.8,24.1,24.1C268,255.05,257.2,265.85,243.9,265.85z M379,350.25 c-41,0-74.2-33.2-74.2-74.2s33.2-74.2,74.2-74.2s74.2,33.2,74.2,74.2C453.2,316.95,420,350.25,379,350.25z"}),r.createElement("path",{id:"XMLID_1745_",d:"M108.8,229.65c-25.6,0-46.3,20.8-46.3,46.3c0,6.1,5,11.1,11.1,11.1c6.1,0,11.1-5,11.1-11.1 c0-13.3,10.9-24.2,24.2-24.2c6.1,0,11.1-5,11.1-11.1C119.9,234.55,114.9,229.65,108.8,229.65z"})))),Ue||(Ue=r.createElement("g",null)),Me||(Me=r.createElement("g",null)),Pe||(Pe=r.createElement("g",null)),Le||(Le=r.createElement("g",null)),Ae||(Ae=r.createElement("g",null)),Te||(Te=r.createElement("g",null)),Re||(Re=r.createElement("g",null)),qe||(qe=r.createElement("g",null)),De||(De=r.createElement("g",null)),Be||(Be=r.createElement("g",null)),ze||(ze=r.createElement("g",null)),Fe||(Fe=r.createElement("g",null)),We||(We=r.createElement("g",null)),He||(He=r.createElement("g",null)),Xe||(Xe=r.createElement("g",null)))}var ct,it=r.forwardRef(at);n.p;function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ut(e,t){var n=e.title,s=e.titleId,a=lt(e,["title","titleId"]);return r.createElement("svg",ot({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,ct||(ct=r.createElement("path",{d:"M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"})))}var dt,pt,ht,jt,mt,ft,bt,gt,Ot,xt=r.forwardRef(ut),vt=(n.p,n(191),n(192),n.p+"static/media/loader_2.809f8bbc.svg"),yt=n(52),wt=n.n(yt),St=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={pet:null,owner:null,loggedInUser:null,isEditMode:!1,isOpanModal:!1,isAttend:!1,isMobileScreen:!1},e.checkScreenWidth=function(){window.innerWidth>500?e.setState({isMobileScreen:!1}):e.setState({isMobileScreen:!0})},e.onShare=function(){},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState({pet:Object(d.a)(Object(d.a)({},e.state.pet),{},Object(u.a)({},r,s))})},e.onUpdatePet=function(){e.props.updatePet(e.state.pet),e.toggleEditMode()},e.toggleEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onAdopt=function(){var t=e.state,n=t.pet,r=t.owner,s=t.loggedInUser;if(!e.props.loggedInUser)return H.emit("alert","Please login in order to adopt this pet");if(s.pets.find((function(e){return e._id===n._id})))return H.emit("alert","You cannot adopt you own pet");e.setState({isAttend:!0});var a={owner:r,petId:n._id,msgToOwner:"".concat(s.fullname," would like to adopt ").concat(n.name," \n Click here to view"),msgToRequester:"".concat(r.fullname," recived your adopt request \n Click here to view"),newRequest:{date:Date.now(),fullname:s.fullname,userId:s._id,message:"".concat(s.fullname," would like to adopt ").concat(n.name),chatId:"c"+M.makeId(7)}};e.props.newAdoptRequest(a)},e.toggleAdopted=function(){e.setState({isAttend:!0})},e.onRemovePet=function(){P.remove(e.state.pet._id),e.props.history.push("/")},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.checkScreenWidth(),window.scroll(0,0),this.props.onExplore();var t=this.props.match.params.petId;this.props.loadPets().then((function(){var n=e.props.pets.find((function(e){return e._id===t}));e.props.loadUsers().then((function(){var t=e.props.users.find((function(e){return e._id===n.owner._id}));e.setState({pet:n,owner:t,loggedInUser:e.props.loggedInUser})}))}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.isMobileScreen;if(null===t)return Object(he.jsx)("h1",{children:"Loading"});var n=this.props.match.params.petId,r=this.props.pets.find((function(e){return e._id===n}));return r?Object(he.jsxs)("section",{className:"pet-details-section main-container",children:[Object(he.jsxs)("header",{className:"details-header flex column",children:[Object(he.jsx)("div",{className:"details-title flex column",children:Object(he.jsx)("h1",{className:"pet-name",children:r.name})}),Object(he.jsxs)("div",{className:"details-header-btns",children:[Object(he.jsx)(Se,{pet:r}),Object(he.jsx)("span",{className:"pet-likes",children:r.likes}),Object(he.jsxs)("span",{className:"share-pet",onClick:function(){return e.onShare},children:[Object(he.jsx)(Ze.a,{}),Object(he.jsx)("div",{className:"hide"})]})]})]}),!t&&Object(he.jsx)("div",{className:"details-imgs-container grid",children:r.imgUrls.map((function(e,t){return Object(he.jsx)("img",{src:e,alt:"skeleton"},r._id+t)}))}),t&&Object(he.jsx)("div",{className:"details-imgs-container grid",children:Object(he.jsx)(wt.a,Object(d.a)(Object(d.a)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:r.imgUrls.map((function(e,t){return Object(he.jsx)("img",{src:e,alt:"skeleton"},r._id+t)}))}))}),Object(he.jsxs)("div",{className:"details-main-section flex",children:[Object(he.jsxs)("div",{className:"details-info-container",children:[Object(he.jsxs)("div",{className:"info-header flex ",children:[Object(he.jsx)("img",{src:r.owner.imgUrl,alt:""}),Object(he.jsxs)("div",{className:"info-header-txt flex column",children:[Object(he.jsx)("h3",{children:r.name+", owned by "+r.owner.name}),Object(he.jsx)("span",{children:r.title})]})]}),Object(he.jsxs)("div",{className:"info-body",children:[Object(he.jsx)(je,{className:"pet-desc",txt:r.desc}),Object(he.jsxs)("ul",{className:"pet-info-list clean-list",children:[Object(he.jsxs)("section",{className:"left-info-list",children:[Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ge.a,{icon:Ye.a}),Object(he.jsx)("p",{children:r.age+" "+r.type})]}),Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ge.a,{icon:Ye.e}),Object(he.jsxs)("p",{children:["Gender: ",r.gender]})]}),Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ge.a,{icon:Ye.b}),Object(he.jsxs)("p",{children:["Breed: ",r.breed]})]})]}),Object(he.jsxs)("section",{className:"right-info-list",children:[Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ge.a,{icon:Ye.d}),Object(he.jsxs)("p",{children:["Vaccinated: ",r.vaccine?"yes":"no"]})]}),Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ge.a,{icon:Ye.c}),Object(he.jsxs)("p",{children:["Spayed/Neutered: ",r.neuterSpayed?"yes":"no"]})]}),Object(he.jsxs)("li",{className:"flex align-center",children:[Object(he.jsx)(Ve.a,{}),Object(he.jsxs)("p",{children:["Trained: ",r.trained?"yes":"no"]})]})]})]})]})]}),Object(he.jsxs)("div",{className:"adopt-modal-container flex column",children:[Object(he.jsxs)("div",{className:"flex align-center",children:[Object(he.jsx)(it,{className:"binoculars"}),Object(he.jsx)("span",{className:"adoption-time adopt-sign",children:"Looking for    a home for "+M.timeSince(r.addedAt)})]}),Object(he.jsxs)("div",{className:"flex align-center",children:[Object(he.jsx)(nt.a,{className:"thumb-up"}),Object(he.jsx)("span",{className:"adoption-likes adopt-sign",children:"Liked by "+r.likes+" people!"})]}),Object(he.jsxs)("div",{className:"flex align-center",children:[Object(he.jsx)(xt,{className:"paw"}),Object(he.jsxs)("span",{className:"adoption-time adopt-sign paw-last",children:[r.name," is waiting for you"]})]}),Object(he.jsx)("button",{className:"adopt-btn el-btn",onClick:function(){return e.onAdopt()},children:this.state.isAttend?"Request sent":"Adopt Me"})]})]}),Object(he.jsx)("div",{className:"comments-section",children:Object(he.jsx)(be,{pet:r},r._id)}),Object(he.jsxs)("section",{className:"google-map section",children:[Object(he.jsx)("h3",{className:"pet-loc",children:"Where to find me"}),Object(he.jsxs)("div",{className:"pet-location",children:[Object(he.jsx)(et.a,{}),r.owner.loc.address]}),Object(he.jsx)(Qe,{loc:r.owner.loc})]})]}):Object(he.jsx)("img",{src:vt,alt:"loading"})}}]),n}(r.Component),kt={toggleLike:G,loadPets:X,loadUsers:ae,newAdoptRequest:function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.saveNewRequest(e);case 3:r=t.sent,n({type:"UPDATE_USER",user:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},onExplore:ue},Nt=Object(i.b)((function(e){return{users:e.userModule.users,pets:e.petModule.pets,loggedInUser:e.userModule.loggedInUser}}),kt)(St),Et=n.p+"static/media/user.81d7b418.svg",_t=n.p+"static/media/menu.28107808.svg",It=(n.p,function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.options,n=e.name,r=e.handleChange;return Object(he.jsx)("div",{className:"select-modal",children:t.map((function(e,t){return Object(he.jsx)("option",{onClick:function(){return r(e,n)},children:e},t)}))})}}]),n}(s.a.Component)),Ct=Object(i.b)((function(e){return{}}),{})(It),Ut=n(53),Mt=n.n(Ut),Pt=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{gender:"",type:"",age:"",size:"",location:""},toggleSelect:{gender:!1,type:!1,age:!1,size:!1}},e.handleChangeInput=function(t){var n=t.target,r=n.name,s=n.value,a=e.state.filterBy;e.setState({filterBy:Object(d.a)(Object(d.a)({},a),{},Object(u.a)({},r,s))})},e.handleChange=function(t,n){var r=e.state.filterBy;e.setState({filterBy:Object(d.a)(Object(d.a)({},r),{},Object(u.a)({},n,t))})},e.onSubmitFilter=function(){var t=new URLSearchParams(e.state.filterBy);e.props.loadPets&&e.props.loadPets(),e.props.history.push("/explore/?".concat(t.toString()))},e.onToggleSelect=function(t){var n=e.state.toggleSelect;e.setState({toggleSelect:Object(u.a)({},t,!n[t])})},e.setOptions=function(){return{size:["small","medium","big"],type:["cat","dog","rabbit","parrot","hamster"],gender:["male","female"],age:["young","adult","senior"]}},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.setOptions(),n=this.state.filterBy,r=n.gender,s=n.age,a=n.type,c=n.location,i=n.size,o=this.state.toggleSelect;return Object(he.jsxs)("section",{className:"pet-filter",children:[Object(he.jsxs)("div",{className:"filter-select pet-select",children:[Object(he.jsx)("label",{children:"Pet"}),Object(he.jsxs)("label",{onClick:function(){return e.onToggleSelect("type")},className:"select-label",children:[Object(he.jsxs)("label",{children:[a,!a&&"any"]}),o.type&&Object(he.jsx)(Ct,{handleChange:this.handleChange,options:t.type,name:"type"},a)]})]}),Object(he.jsxs)("div",{className:"filter-select gender-select",children:[Object(he.jsx)("label",{children:"Gender"}),Object(he.jsxs)("label",{onClick:function(){return e.onToggleSelect("gender")},className:"select-label",children:[Object(he.jsxs)("label",{children:[r,!r&&"any"]}),o.gender&&Object(he.jsx)(Ct,{handleChange:this.handleChange,options:t.gender,name:"gender"},r)]})]}),Object(he.jsxs)("div",{className:"filter-select age-select",children:[Object(he.jsx)("label",{children:"Age"}),Object(he.jsxs)("label",{onClick:function(){return e.onToggleSelect("age")},className:"select-label",children:[Object(he.jsxs)("label",{children:[s,!s&&"any"]}),o.age&&Object(he.jsx)(Ct,{handleChange:this.handleChange,options:t.age,name:"age"},s)]})]}),Object(he.jsxs)("div",{className:"filter-select size-select",children:[Object(he.jsx)("label",{children:"Size"}),Object(he.jsxs)("label",{onClick:function(){return e.onToggleSelect("size")},className:"select-label",children:[Object(he.jsxs)("label",{children:[i,!i&&"any"]}),o.size&&Object(he.jsx)(Ct,{handleChange:this.handleChange,options:t.size,name:"size"},i)]})]}),Object(he.jsxs)("div",{className:"filter-select location-select",children:[Object(he.jsx)("label",{className:"location-label",children:"Location"}),Object(he.jsx)("input",{placeholder:"Enter location",className:"location-select",value:c,onChange:this.handleChangeInput,name:"location"})]}),Object(he.jsx)("button",{className:"search-btn filter-select",onClick:this.onSubmitFilter,children:Object(he.jsx)(Mt.a,{className:"filter-search"})})]})}}]),n}(s.a.Component),Lt=Object(l.f)(Pt);function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Rt(e,t){var n=e.title,s=e.titleId,a=Tt(e,["title","titleId"]);return r.createElement("svg",At({id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56.26 54.79",ref:t,"aria-labelledby":s},a),dt||(dt=r.createElement("defs",null,r.createElement("style",null,".cls-1{fill:#2eb79d;}.cls-2{fill:#fff;}"))),void 0===n?r.createElement("title",{id:s},"logo1"):n?r.createElement("title",{id:s},n):null,pt||(pt=r.createElement("rect",{className:"cls-1",width:56.26,height:54.79,rx:6.66})),ht||(ht=r.createElement("ellipse",{className:"cls-2",cx:93.2,cy:74.26,rx:4.13,ry:5.38,transform:"translate(-85.16 -31.25) rotate(-14.23)"})),jt||(jt=r.createElement("ellipse",{className:"cls-2",cx:102.73,cy:74.26,rx:5.38,ry:4.13,transform:"translate(-71.12 90.16) rotate(-70.66)"})),mt||(mt=r.createElement("ellipse",{className:"cls-2",cx:84.75,cy:78.51,rx:4.13,ry:5.38,transform:"translate(-100.09 11.83) rotate(-37.72)"})),ft||(ft=r.createElement("ellipse",{className:"cls-2",cx:111.34,cy:78.87,rx:5.38,ry:4.13,transform:"translate(-91.06 54.44) rotate(-48.88)"})),bt||(bt=r.createElement("path",{className:"cls-2",d:"M110.44,90.79c-1.9,18.49-7,6.55-12.57,6.76-5,.2-9.87,11.81-12.51-6.76C84.46,84.46,91,79.22,97.9,79.22S111.1,84.43,110.44,90.79Z",transform:"translate(-69.77 -56.44)"})),gt||(gt=r.createElement("rect",{className:"cls-1",x:26.49,y:28.91,width:3.26,height:9.82})),Ot||(Ot=r.createElement("rect",{className:"cls-1",x:96.25,y:85.35,width:3.26,height:9.82,transform:"translate(118.37 -64.07) rotate(90)"})))}var qt=r.forwardRef(Rt),Dt=(n.p,n(211),function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={location:null},e.adoptNotify=function(e){xe.store.addNotification({title:"Wonderful!",message:e,type:"info",insert:"top",container:"bottom-full",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:4e3,onScreen:!1}})},e.alertNotify=function(e){xe.store.addNotification({title:"Opps!",message:e,type:"info",insert:"top",container:"bottom-full",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:4e3,onScreen:!1}})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("SocketsNotification is running"),H.on("adopt-request-owner",(function(t){console.log("messging the owner"),e.setState({location:"profile"}),e.adoptNotify(t)})),H.on("adopt-request-requester",(function(t){console.log("messging the requester"),e.setState({location:"profile"}),e.adoptNotify(t)})),H.on("already-requested",(function(t){e.alertNotify(t)})),H.on("alert-to-notify",(function(t){console.log("alert-to-notify",t),e.alertNotify(t)}))}},{key:"componentWillUnmount",value:function(){H.off("adopt-request-owner"),H.off("adopt-request-requester"),H.off("already-requested"),console.log("SocketsNotification is off")}},{key:"render",value:function(){return this.state.location?Object(he.jsx)(o.b,{to:this.state.location&&"/".concat(this.state.location),children:Object(he.jsx)(ve.a,{})}):Object(he.jsx)(he.Fragment,{children:Object(he.jsx)(ve.a,{})})}}]),n}(r.Component)),Bt=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isProfileShown:!1,isRequested:!1,navBackground:!1,isFilterShown:!1},e.handleScroll=function(){e.setState({isFilterShown:!1}),window.pageYOffset>50?e.setState({navBackground:!0}):e.setState({navBackground:!1})},e.handleClick=function(){e.state.isProfileShown&&window.event.clientY>80&&e.setState({isProfileShown:!1})},e.onLogout=function(){e.props.logout(e.props.loggedInUser._id)},e.toggleDropdown=function(){e.setState({isProfileShown:!e.state.isProfileShown})},e.onToggleFilter=function(){e.setState({isFilterShown:!e.state.isFilterShown})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("cdm"),window.addEventListener("click",this.handleClick),window.addEventListener("scroll",this.handleScroll),H.on("sending-new-owner-to-save",(function(){e.props.approveAdoptToOwner()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.loggedInUser,r=t.inExplore,s=t.isShowSearch,a=this.state,c=a.isProfileShown,i=a.navBackground,l=a.isFilterShown;return Object(he.jsx)("header",{className:"main-header ".concat(i&&"nav-white","  ").concat(!i&&"nav-transparent"," \n              main-container     ").concat(s&&l&&"resize-nav"),children:Object(he.jsxs)("nav",{className:"header-container",children:[Object(he.jsx)(o.c,{to:"/",children:Object(he.jsxs)("div",{className:"logo-container flex",children:[Object(he.jsx)(qt,{className:"logo"}),Object(he.jsx)("h1",{className:"logo-title ".concat(i&&"black"," ").concat(r&&"black"," "),children:"PetMe"})]})}),Object(he.jsxs)("section",{className:"filter-section",children:[s&&!l&&Object(he.jsxs)("div",{className:"explore-search",children:[Object(he.jsx)("span",{onClick:function(){return e.onToggleFilter()},children:" Start your search"}),Object(he.jsx)(Mt.a,{className:"search-btn-explore"})]}),s&&l&&Object(he.jsx)(Lt,{})]}),Object(he.jsx)("div",{children:Object(he.jsx)(Dt,{})}),Object(he.jsxs)("div",{className:"right-nav",children:[Object(he.jsx)(o.c,{onClick:function(){return e.props.loadPets()},className:"explore-btn ".concat(i&&"black"," ").concat(r&&"black"," "),to:"/explore/?gender=&age=&type=&location=&size=",children:"Explore"}),Object(he.jsxs)("div",{onClick:function(){return e.toggleDropdown()},className:"login-profile",children:[c&&Object(he.jsx)("div",{className:"user-dropdown",children:Object(he.jsxs)("div",{className:"dropdown-list",children:[n&&Object(he.jsx)(o.b,{to:"/profile",children:Object(he.jsx)("span",{children:"Profile"})}),n&&Object(he.jsx)("a",{href:"",onClick:function(){return e.onLogout()},children:"Logout"}),!n&&Object(he.jsx)(o.b,{to:"/login",children:Object(he.jsx)("span",{children:"Login"})})]})}),Object(he.jsx)("img",{src:_t,alt:"icon"}),!n&&Object(he.jsx)("img",{src:Et,alt:"icon"}),n&&Object(he.jsx)("img",{className:"profile-icon",src:n.imgUrl,alt:"icon"})]})]})]})})}}]),n}(r.Component),zt={logout:le,loadPets:X,approveAdoptToOwner:function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.update(e);case 2:r=t.sent,console.log("updating new-owner-user"),n({type:"UPDATE_USER",user:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ft=Object(i.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,inExplore:e.systemModule.onExplore,isShowSearch:e.systemModule.isShowSearch}}),zt)(Bt),Wt=n(103),Ht=n.n(Wt),Xt=n(104),Qt=n.n(Xt),Gt=n(105),Yt=n.n(Gt);function Jt(){return Object(he.jsxs)("footer",{className:"main-footer main-layout flex column align-center justify-center",children:[Object(he.jsx)("small",{children:"\xa9 PetMe - All Rights Reserved."}),Object(he.jsxs)("ul",{className:"nav-social flex align-center justify-center clean-list",children:[Object(he.jsx)("li",{children:Object(he.jsx)(Ht.a,{className:"fa"})}),Object(he.jsx)("li",{children:Object(he.jsx)(Qt.a,{className:"in"})}),Object(he.jsx)("li",{children:Object(he.jsx)(Yt.a,{className:"tw"})})]})]})}var Vt=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isFilterShown:!0},e.handleScroll=function(){window.pageYOffset>50?(e.props.showSearch(),e.state.isFilterShown&&e.setState({isFilterShown:!1})):e.state.isFilterShown||(e.props.hideSearch(),e.setState({isFilterShown:!0}))},e.onToggleFilter=function(){e.setState({isFilterShown:!e.state.isFilterShown})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("scroll",this.handleScroll);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.state.isFilterShown;return Object(he.jsx)(he.Fragment,{children:e&&Object(he.jsx)(Lt,{})})}}]),n}(s.a.Component),Kt={showSearch:de,hideSearch:pe},Zt=Object(i.b)((function(e){return{}}),Kt)(Vt);function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function en(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function tn(e,t){var n=e.title,s=e.titleId,a=en(e,["title","titleId"]);return r.createElement("svg",$t({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 423.184 423.184",width:"20px",xmlSpace:"preserve",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,r.createElement("path",{d:"M407.51,0H266.971c-8.882,0-15.673,6.792-15.673,15.673s6.792,15.673,15.673,15.673h102.922 L264.882,136.359c-28.212-22.988-63.739-37.094-102.922-37.094C72.62,99.265,0,171.886,0,261.224s72.62,161.959,161.959,161.959 s161.959-72.62,161.959-161.959c0-39.184-14.106-74.71-37.094-102.922L391.837,53.29v102.922c0,8.882,6.792,15.673,15.673,15.673 s15.673-6.792,15.673-15.673V15.673C423.184,6.792,416.392,0,407.51,0z M161.959,391.837c-72.098,0-130.612-58.514-130.612-130.612 s58.514-130.612,130.612-130.612s130.612,58.514,130.612,130.612S234.057,391.837,161.959,391.837z",style:{fill:"rgb(0, 187, 211)"}}))}var nn=r.forwardRef(tn);n.p;function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sn(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function an(e,t){var n=e.title,s=e.titleId,a=sn(e,["title","titleId"]);return r.createElement("svg",rn({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",width:"20px",xmlSpace:"preserve",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,r.createElement("path",{d:"M318.841,402.801h-30.905v46.358h30.905c12.801,0,23.179-10.378,23.179-23.179 S331.642,402.801,318.841,402.801z",style:{fill:"rgb(214, 61, 118)"}}),r.createElement("path",{d:"M425.98,169.98C425.98,76.103,349.877,0,256,0S86.02,76.103,86.02,169.98 c0,86.014,63.891,157.093,146.801,168.401v64.42h-39.662c-12.801,0-23.179,10.378-23.179,23.179s10.378,23.179,23.179,23.179h39.662 v39.662C232.821,501.622,243.199,512,256,512c12.801,0,23.179-10.378,23.179-23.179v-39.662h8.757 c12.801,0,23.179-10.378,23.179-23.179s-10.378-23.179-23.179-23.179h-8.757v-64.42C362.089,327.073,425.98,255.994,425.98,169.98z  M256,293.602c-68.274,0-123.622-55.348-123.622-123.622S187.726,46.358,256,46.358s123.622,55.348,123.622,123.622 S324.274,293.602,256,293.602z",style:{fill:"rgb(255, 65, 129)"}}))}var cn=r.forwardRef(an),on=(n.p,function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.pet,t="female"===(null===e||void 0===e?void 0:e.gender)?Object(he.jsx)(cn,{className:"gender"}):Object(he.jsx)(nn,{className:"gender"});return Object(he.jsxs)("section",{className:"pet-card-container",children:[Object(he.jsx)(o.b,{to:"/".concat(e._id),children:Object(he.jsx)(wt.a,Object(d.a)(Object(d.a)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:e.imgUrls.map((function(t){return Object(he.jsx)("img",{className:"img-preview",src:t,alt:""},e._id)}))}))},e._id),Object(he.jsxs)("div",{className:"card-info",children:[Object(he.jsxs)("div",{className:"pet-name-gender flex",children:[Object(he.jsx)("p",{children:e.name}),t]}),Object(he.jsx)("p",{className:"pet-title",children:e.title}),Object(he.jsxs)("div",{className:"pet-preview-host flex",children:[Object(he.jsx)("p",{children:e.owner.name}),Object(he.jsxs)("div",{className:"pet-preview-likes flex",children:[Object(he.jsx)(Se,{pet:e}),Object(he.jsx)("span",{children:e.likes})]})]})]})]})}}]),n}(s.a.Component)),ln=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={likedPets:[],mostWaitingPets:[]},e.setLikedPets=function(){var t=Object(Y.a)(e.props.pets);t.sort((function(e,t){return e.likes>t.likes?-1:e.likes<t.likes?1:void 0})),t.splice(4),e.setState({likedPets:t})},e.setMostWaitingPets=function(){var t=Object(Y.a)(e.props.pets);t.sort((function(e,t){return t.addedAt>e.addedAt?-1:e.addedAt<t.addedAt?1:void 0})),t.splice(4),e.setState({mostWaitingPets:t})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadPets();case 2:this.setLikedPets(),this.setMostWaitingPets();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.likedPets,n=e.mostWaitingPets;return t.length&&n.length?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("section",{className:"type-cards preview-homepage",children:[Object(he.jsx)("h2",{className:"type-cards-title",children:"Waiting long time to adopt"}),Object(he.jsx)("div",{className:"preview-cards",children:n.map((function(e){return Object(he.jsx)(on,{pet:e},e._id)}))})]}),Object(he.jsxs)("section",{className:"type-cards preview-homepage",children:[Object(he.jsx)("h2",{className:"type-cards-title",children:"Most Liked Pets"}),Object(he.jsx)("div",{className:"preview-cards",children:t.map((function(e){return Object(he.jsx)(on,{pet:e},e._id)}))})]})]}):Object(he.jsx)("h1",{children:"loading"})}}]),n}(s.a.Component);var un,dn={loadPets:X,addPet:Q},pn=Object(i.b)((function(e){return{homePreviewPets:e.petModule.homePreviewPets}}),dn)(ln),hn=n(106),jn=n.n(hn);function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fn(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function bn(e,t){var n=e.title,s=e.titleId,a=fn(e,["title","titleId"]);return r.createElement("svg",mn({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"rgba(241, 242, 243, 0)",display:"block",shapeRendering:"auto"},width:"201px",height:"201px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,un||(un=r.createElement("g",null,r.createElement("path",{d:"M50 40A10 10 0 1 0 58.686315144381915 45.04541331567593",fill:"none",stroke:"#36baa0",strokeWidth:4}),r.createElement("path",{d:"M49 35L49 45L54 40L49 35",fill:"#36baa0"}),r.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"0.8s",values:"0 50 50;360 50 50",keyTimes:"0;1"}))))}var gn=r.forwardRef(bn),On=(n.p,n(108)),xn=n.n(On),vn=n(107),yn=n.n(vn),wn=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scroll(0,0),this.props.hideSearch(),this.props.onHome(),e.next=5,this.props.loadPets();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return 0===this.props.pets.length?Object(he.jsx)(gn,{}):Object(he.jsxs)("section",{className:"main-container",children:[Object(he.jsx)("section",{className:"hero full",children:Object(he.jsxs)("div",{className:"hero-content",children:[Object(he.jsx)(Zt,{}),Object(he.jsx)("h1",{children:"Find your"}),Object(he.jsx)("h1",{children:" best friend"})]})}),Object(he.jsxs)("div",{className:"type-cards",children:[Object(he.jsx)("h2",{className:"type-cards-title",children:"Our sweet pet types"}),Object(he.jsxs)("div",{className:"type-img",children:[Object(he.jsx)("div",{children:Object(he.jsxs)(o.b,{to:"/explore/?gender=&age=&type=dog&location=&size=",children:[Object(he.jsx)("img",{src:"https://res.cloudinary.com/dstqymucm/image/upload/v1622205405/dogs/dog3/frnach-dog3_npdovb.jpg",alt:"card"}),Object(he.jsx)("h4",{children:"Dogs"})]})}),Object(he.jsx)("div",{children:Object(he.jsxs)(o.b,{to:"/explore/?gender=&age=&type=cat&location=&size=",children:[Object(he.jsx)("img",{src:"https://res.cloudinary.com/dstqymucm/image/upload/v1622203804/petMe/cats/cat_nnrk1h.jpg",alt:"card"}),Object(he.jsx)("h4",{children:"Cats"})]})}),Object(he.jsx)("div",{children:Object(he.jsxs)(o.b,{to:"/explore/?gender=&age=&type=rabbit&location=&size=",children:[Object(he.jsx)("img",{src:"https://res.cloudinary.com/dstqymucm/image/upload/v1622206572/petMe/rabbit/rrabit3/1_2_chadja.jpg",alt:"card"}),Object(he.jsx)("h4",{children:"Rabbits"})]})}),Object(he.jsx)("div",{children:Object(he.jsxs)(o.b,{to:"/explore/?gender=&age=&type=parrot&location=&size=",children:[Object(he.jsx)("img",{src:"https://res.cloudinary.com/dstqymucm/image/upload/v1622213930/petMe/parrot/1_3_s1zdqk.jpg",alt:"card"}),Object(he.jsx)("h4",{children:"Parrots"})]})})]})]}),Object(he.jsx)("section",{className:"homepage-section-info",children:Object(he.jsxs)("div",{className:"content",children:[Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{className:"info-title-icon",children:[Object(he.jsx)("h2",{children:"Filter down to your perfect fit"}),Object(he.jsx)(jn.a,{className:"info-icons"})]}),Object(he.jsx)("p",{children:" Personalize your search with filters like gender, type, size or a pool to get exactly what you want."})]}),Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{className:"info-title-icon",children:[Object(he.jsx)("h2",{children:"Dig into the details"}),Object(he.jsx)(yn.a,{className:"info-icons"})]}),Object(he.jsx)("p",{children:" Check out the photos and view pet information. Next, read user reviews and comments about the pet and its owner."})]}),Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{className:"info-title-icon",children:[Object(he.jsx)("h2",{children:"Contact pet owners"}),Object(he.jsx)(xn.a,{className:"info-icons"})]}),Object(he.jsx)("p",{children:"  Once you have decided which pet you would like to adopt, contact the pet owners and keep your fingers crossed."})]}),Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{className:"info-title-icon",children:[Object(he.jsx)("h2",{children:"Adopt a friend!"}),Object(he.jsx)(xt,{className:"info-icons"})]}),Object(he.jsx)("p",{children:" In a quick and easy process you can adopt a pet that will become your new companion for life. Join us for a fun journey!"})]})]})}),Object(he.jsx)(pn,{pets:this.props.pets}),Object(he.jsx)("section",{className:"homepage-about main-container full",children:Object(he.jsx)("div",{className:"blur full",children:Object(he.jsxs)("div",{className:"about-content flex column",children:[Object(he.jsx)("h2",{children:"Our vision"}),Object(he.jsx)("p",{children:"PetMe is dedicated to saving the lives of animals in need. We improve animal welfare in communities through adoption, education, and providing resources for people and pets."}),Object(he.jsx)("p",{children:"We strive for a world where every companion animal has a safe and loving home and their family has the knowledge and resources needed to give them the life they deserve."}),Object(he.jsx)("img",{className:"welcome-logo",src:"https://petcolove.org/wp-content/uploads/2018/08/welcome-to-the-family-web.png",alt:""})]})})})]})}}]),n}(s.a.Component);var Sn={loadPets:X,addPet:Q,onHome:function(){return function(e){e({type:"ON_HOME"})}},showSearch:de,hideSearch:pe},kn=Object(i.b)((function(e){return{pets:e.petModule.pets}}),Sn)(wn),Nn=n(109),En=n.n(Nn),_n=n.p+"static/media/loader_3.162bac3d.svg",In=n.p+"static/media/pin.3b7dea01.svg",Cn=n(228),Un=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={userPets:[],userRequests:[],isGotRequests:!1,isRemoveReq:!1,reqBtnTxt:"",adoptionRequestsInfo:[],loggedInUser:null,IncomingLiveData:null,updatedPets:null},e.loadLoggedInUser=function(){J.updateLoggedInUser(e.props.loggedInUser._id)},e.onLoadPets=function(){e.props.loadPets().then((function(){var t=e.props.loggedInUser.pets.map((function(t){return e.props.pets.filter((function(e){return t._id===e._id}))})).flatMap((function(e){return e}));e.setState({userPets:t})}))},e.socketListeners=function(){H.on("adopt-request-owner-data",(function(t){console.log("im on profile"),e.setState({IncomingLiveData:t})}))},e.onLoadRequests=function(){var t=e.props.users.map((function(t){return t.pets.map((function(n){return n.adoptQue.map((function(r){if(r.userId===e.props.loggedInUser._id)return{user:t,pet:Object(d.a)(Object(d.a)({},n),{},{userId:t._id})}})).filter((function(e){return e}))})).flatMap((function(e){return e}))}));e.setState({adoptionRequestsInfo:t})},e.removeReq=function(e){},e.toggleRemoveReq=function(){},e.reqBtnTxt=function(t){e.setState({reqBtnTxt:t})},e.approveAdopt=function(t,n,r,s){var a=r.fullname+" just approved your request to adopt "+t.name,c={pet:t,req:n,loggedInUser:r,idx:s,msg:a};e.props.approveAdopt(c),H.emit("aprove-adopt",a)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.onLoadPets(),this.socketListeners(),this.loadLoggedInUser(),this.props.onExplore()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e,t=this;this.loadLoggedInUser();var n=this.props.loggedInUser,r=this.state.userPets,s=null;if(this.state.IncomingLiveData){var a=this.state.IncomingLiveData.newRequest;s=a}return n&&r?Object(he.jsxs)("section",{className:"main-profile main-container",children:[Object(he.jsxs)("section",{className:"user-card",children:[Object(he.jsx)("div",{className:"profile-img",children:Object(he.jsx)("img",{src:n.imgUrl,alt:Object(he.jsx)(En.a,{})})}),Object(he.jsxs)("section",{className:"user-info",children:[Object(he.jsxs)("h1",{children:[n.fullname," "]}),Object(he.jsxs)("h4",{children:[n.username," "]}),Object(he.jsxs)("h4",{className:"italic",children:['"',n.title,'"']}),Object(he.jsxs)("div",{className:"location-info",children:[Object(he.jsx)("img",{src:In,alt:"location info"}),Object(he.jsx)("div",{children:n.loc.address})]}),Object(he.jsx)("div",{className:"user-rate",children:Object(he.jsx)(Cn.a,{name:"disabled",value:n.rating?n.rating:null===(e=n.reviews[0])||void 0===e?void 0:e.rate,disabled:!0})})]})]}),Object(he.jsxs)("section",{className:"profile-pets-container flex",children:[Object(he.jsxs)("div",{className:"user-pets",children:[Object(he.jsx)("h1",{children:"My pets"}),Object(he.jsx)("h1",{children:this.state.IncomingLiveData&&this.state.IncomingLiveData.petId}),r.map((function(e,r){return Object(he.jsx)("div",{className:"adopt-card flex",children:Object(he.jsxs)("div",{className:"adopt-card-info",children:[Object(he.jsxs)("div",{className:"pet-header flex",children:[Object(he.jsxs)("div",{className:"pet-header-txt",children:[Object(he.jsx)("h3",{children:e.name}),Object(he.jsxs)("h4",{children:["Added: ",M.timeSince(e.addedAt,"ago")]}),Object(he.jsx)("h4",{children:"Request Queue"})]}),Object(he.jsx)("div",{className:"pet-img-box flex align-center",children:Object(he.jsx)("img",{src:e.imgUrls[0],alt:"pet"})})]}),Object(he.jsxs)("section",{className:"adopt-table",children:[Object(he.jsx)("table",{className:"pet-table-card",children:Object(he.jsxs)("tbody",{className:"table-body",children:[!n.pets[r].adoptQue.map((function(s){return Object(he.jsxs)("tr",{children:[Object(he.jsx)("td",{children:s.fullname}),Object(he.jsx)("td",{children:s.message}),Object(he.jsx)("td",{children:M.timeSince(s.date,"ago")}),Object(he.jsx)("td",{children:Object(he.jsx)("button",{onClick:function(){return t.approveAdopt(e,s,n,r)},className:"aprove-btn",children:"Aprove"})})]},M.makeId(6))})),s&&Object(he.jsxs)("tr",{children:[Object(he.jsx)("td",{children:s.fullname}),Object(he.jsx)("td",{children:s.message}),Object(he.jsx)("td",{children:M.timeSince(s.date,"ago")}),Object(he.jsx)("td",{children:Object(he.jsx)("button",{onClick:function(){return t.approveAdopt(e,s,n,r)},className:"aprove-btn",children:"Aprove"})})]},M.makeId(6))]},M.makeId(6))}),Object(he.jsx)("tbody",{className:"table-body",children:!n.pets[r].adoptQue.map((function(s){return Object(he.jsxs)("tr",{children:[Object(he.jsx)("td",{children:s.fullname}),Object(he.jsx)("td",{children:s.message}),Object(he.jsx)("td",{children:M.timeSince(s.date,"ago")}),Object(he.jsx)("td",{children:Object(he.jsx)("button",{onClick:function(){return t.approveAdopt(e,s,n,r)},className:"aprove-btn",children:"Aprove"})})]},M.makeId(6))}))},M.makeId(6))]})]})},M.makeId(6))}))]}),Object(he.jsxs)("div",{className:"user-requests hide",children:[Object(he.jsx)("h1",{children:"My requests"}),Object(he.jsx)("div",{className:"request-list flex column",children:r.map((function(e,r){return n.pets[r].adoptQue.map((function(e){return Object(he.jsxs)("div",{className:"request-card flex column",children:[Object(he.jsxs)("div",{className:"main-card-section",children:[Object(he.jsxs)("div",{className:"request-info",children:[Object(he.jsxs)("div",{className:"req-owner-name flex",children:[Object(he.jsx)("h3",{children:"From:"}),Object(he.jsx)("span",{className:"owner-name",children:e.fullname})]}),Object(he.jsxs)("div",{className:"req-pet-info flex",children:[Object(he.jsx)("h3",{className:"about-pet",children:"Messege:"}),Object(he.jsx)("span",{className:"pet-name",children:e.message})]}),Object(he.jsx)("div",{className:"req-time",children:M.timeSince(e.date,"ago")})]}),Object(he.jsx)("div",{className:"request-statue",children:Object(he.jsx)("button",{onClick:function(){return t.toggleRemoveReq},onMouseOver:function(){return t.reqBtnTxt("Delete this Request")},onMouseOut:function(){return t.reqBtnTxt("Requested/Aprove")},className:t.state.isRemoveReqHover?"remove-request hovering":"remove-request",children:t.state.reqBtnTxt?t.state.reqBtnTxt:"Requested/Aprove"})})]}),Object(he.jsx)("div",{className:"card-extention"})]},M.makeId(6))}))}))})]})]})]}):Object(he.jsx)("img",{src:_n,alt:"loadnig"})}}]),n}(r.Component),Mn={login:ie,logout:le,signup:oe,removeUser:ce,loadUsers:ae,loadPets:X,onExplore:ue,approveAdopt:function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.saveNewApprove(e);case 2:r=t.sent,console.log("updating oldOwner"),H.emit("update-new-owner",r.updatedOwner),s={type:"UPDATE_USER",user:r.updatedLoggedInUser},H.emit("approve-requested",e),n(s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUser:function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.getById(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Pn=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser,isLoading:e.systemModule.isLoading,pets:e.petModule.pets}}),Mn)(Un);function Ln(e){var t=e.pets;return Object(he.jsxs)("section",{className:"card-list",children:[t.map((function(e){return Object(he.jsx)(on,{pet:e},e._id)})),!t&&Object(he.jsx)("div",{children:"No pets to show"})]})}var An=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isFilterShown:!1,filterBy:null,sortBy:"",pets:[],isLoading:!1},e.onSetSort=function(){var t=e.state,n=t.filterBy,r=t.sortBy,s=Object(d.a)(Object(d.a)({},n),{},{sort:r});e.props.loadPets(s)},e.handleChange=function(t){e.setState({sortBy:t.target.value},(function(){e.onSetSort()}))},e.onSetFilter=function(){var t=new URLSearchParams(e.props.location.search),n={gender:t.get("gender"),type:t.get("type"),age:t.get("age"),size:t.get("size"),location:t.get("location")};e.setState({filterBy:n})},e.onToggleFilter=function(){e.setState({isFilterShown:!e.state.isFilterShown})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scroll(0,0),this.props.onExplore(),this.props.showSearch(),e.next=5,this.onSetFilter();case 5:return e.next=7,this.props.loadPets(this.state.filterBy);case 7:this.setState({isLoading:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidUpdate"),console.log(this.state.filterBy),new URLSearchParams(this.state.filterBy).toString();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.log("render");var e=this.props.pets,t=this.state,n=t.filterBy,r=t.isLoading;return e.length&&n&&r?Object(he.jsxs)("section",{className:"main-container explore-container",children:[Object(he.jsxs)("div",{className:"filter-description",children:[!n.type&&Object(he.jsx)("h1",{children:"Our pets"}),n.type&&Object(he.jsxs)("h1",{children:["Our ",Object(he.jsxs)("span",{children:[" ",n.gender," ",n.size,"  ",n.type,"s"]}),"  "]}),Object(he.jsxs)("div",{className:"sort-form",children:[Object(he.jsx)("label",{children:"Sort By"}),Object(he.jsxs)("select",{className:"select-sort",value:this.state.sortBy,onChange:this.handleChange,children:[Object(he.jsx)("option",{value:"createdAt",children:"Date"}),Object(he.jsx)("option",{value:"name",children:"Name"}),Object(he.jsx)("option",{value:"likes",children:"Likes"})]})]})]}),Object(he.jsx)(Ln,{pets:e})]}):Object(he.jsx)("img",{src:vt,alt:"loading"})}}]),n}(s.a.Component);var Tn={loadPets:X,onExplore:ue,showSearch:de},Rn=Object(i.b)((function(e){return{pets:e.petModule.pets,inExplore:e.systemModule.onExplore}}),Tn)(An),qn=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:""}},e.loginHandleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState((function(e){return{loginCred:Object(d.a)(Object(d.a)({},e.loginCred),{},Object(u.a)({},r,s))}}))},e.signupHandleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState((function(e){return{signupCred:Object(d.a)(Object(d.a)({},e.signupCred),{},Object(u.a)({},r,s))}}))},e.doLogin=function(){var t=Object(g.a)(b.a.mark((function t(n){var r,s,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.loginCred,s=r.username,a=r.password,s){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:c={username:s,password:a};try{e.props.login(c),e.setState({loginCred:{username:"",password:""}})}catch(i){e.setState({msg:"Login failed, try again."})}e.props.history.push("/");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(g.a)(b.a.mark((function t(n){var r,s,a,c,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.signupCred,s=r.username,a=r.password,c=r.fullname,s&&a&&c){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:i={username:s,password:a,fullname:c},e.props.signup(i),e.setState({signupCred:{username:"",password:"",fullname:""}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.onExplore(),this.props.loadUsers()}},{key:"render",value:function(){var e=this,t=Object(he.jsxs)("form",{className:"frm",onSubmit:this.doSignup,children:[Object(he.jsx)("h2",{children:"Signup"}),Object(he.jsx)("input",{type:"text",name:"fullname",value:this.state.signupCred.fullname,onChange:this.signupHandleChange,placeholder:"Full name",autoComplete:"fullname"}),Object(he.jsx)("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password",autoComplete:"current-password"}),Object(he.jsx)("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",autoComplete:"username"}),Object(he.jsx)("br",{}),Object(he.jsx)("button",{children:"Signup"})]}),n=Object(he.jsxs)("form",{className:"frm",onSubmit:this.doLogin,children:[Object(he.jsx)("h2",{children:"Login"}),Object(he.jsxs)("select",{name:"username",value:this.state.loginCred.username,onChange:this.loginHandleChange,children:[Object(he.jsx)("option",{value:"",children:"Select User"}),this.props.users&&this.props.users.map((function(e){return Object(he.jsx)("option",{value:e.username,children:e.fullname},e._id)}))]}),Object(he.jsx)("button",{children:"Login"})]}),r=this.props.loggedInUser;return Object(he.jsxs)("div",{className:"login",children:[Object(he.jsx)("p",{children:this.state.msg}),r&&Object(he.jsx)("div",{children:Object(he.jsxs)("h3",{children:["Welcome ",r.fullname,Object(he.jsx)("button",{onClick:function(){return e.props.logout(r._id)},children:"Logout"})]})}),!r&&n,!r&&t]})}}]),n}(r.Component),Dn={login:ie,logout:le,signup:oe,removeUser:ce,loadUsers:ae,onExplore:ue},Bn=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser,isLoading:e.systemModule.isLoading}}),Dn)(qn);function zn(){return Object(he.jsx)("div",{className:"app flex column",children:Object(he.jsxs)(o.a,{children:[Object(he.jsx)(Dt,{},"2312412"),Object(he.jsx)(Ft,{}),Object(he.jsx)("main",{className:"main-layout",children:Object(he.jsxs)(l.c,{children:[Object(he.jsx)(l.a,{path:"/explore",component:Rn}),Object(he.jsx)(l.a,{path:"/profile",component:Pn}),Object(he.jsx)(l.a,{path:"/login",component:Bn}),Object(he.jsx)(l.a,{path:"/:petId",component:Nt}),Object(he.jsx)(l.a,{path:"/",component:kn})]})}),Object(he.jsx)(Jt,{})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(212);var Fn=n(36),Wn=n(110),Hn=null;sessionStorage.loggedinUser&&(Hn=JSON.parse(sessionStorage.loggedinUser));var Xn={loggedInUser:Hn,users:[],userPets:[]};Xn.loggedInUser&&H.emit("user-join",Xn.loggedInUser._id);var Qn={isLoading:!1,onExplore:!1,isShowSearch:!1};var Gn={pets:[],homePreviewPets:[],pet:null,filter:null};var Yn=Object(Fn.b)({systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SHOW_SEARCH":return Object(d.a)(Object(d.a)({},e),{},{isShowSearch:!0});case"NOT_SHOW_SEARCH":return Object(d.a)(Object(d.a)({},e),{},{isShowSearch:!1});case"SHOW_SEARCH":return Object(d.a)(Object(d.a)({},e),{},{isShowSearch:!e.isShowSearch});case"ON_EXPLORE":return Object(d.a)(Object(d.a)({},e),{},{onExplore:!0});case"ON_HOME":return Object(d.a)(Object(d.a)({},e),{},{onExplore:!1});case"LOADING_START":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(d.a)(Object(d.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(d.a)(Object(d.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"UPDATE_USER":return console.log("updating user in the reducer",t.user),Object(d.a)(Object(d.a)({},e),{},{users:e.users.map((function(n){return n._id===t.user._id?(n._id===e.loggedInUser._id&&(e.loggedInUser=t.user),t.user):n}))});case"SET_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:t.users});case"SET_USER_PETS":return Object(d.a)(Object(d.a)({},e),{},{userPets:t.users});case"SET_SCORE":return Object(d.a)(Object(d.a)({},e),{},{loggedInUser:Object(d.a)(Object(d.a)({},e.loggedInUser),{},{score:t.score})});default:return e}},petModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PETS":return Object(d.a)(Object(d.a)({},e),{},{pets:t.pets});case"ADD_PET":return Object(d.a)(Object(d.a)({},e),{},{pets:[].concat(Object(Y.a)(e.pets),[t.pet])});case"UPDATE_PET":return Object(d.a)(Object(d.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.pet._id?t.pet:e}))});case"REMOVE_PET":return Object(d.a)(Object(d.a)({},e),{},{pets:e.pets.filter((function(e){return e._id!==t.petId}))});case"ADD_LIKE":return Object(d.a)(Object(d.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.petId?(e.likes++,e.likedBy.push(t.userId),e):e}))});case"REMOVE_LIKE":return Object(d.a)(Object(d.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.petId?(e.likes--,e.likedBy.splice(t.idx,1),e):e}))});case"ADD_COMMENT":return Object(d.a)(Object(d.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.petId?(e.comments.push(t.newComment),e):e}))});case"SET_FILTER":return Object(d.a)(Object(d.a)({},e),{},{filter:t.filter});default:return e}}}),Jn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Fn.c,Vn=Object(Fn.d)(Yn,Jn(Object(Fn.a)(Wn.a))),Kn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(he.jsx)(i.a,{store:Vn,children:Object(he.jsx)(zn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Kn()}},[[213,1,2]]]);
//# sourceMappingURL=main.a89ee76a.chunk.js.map